import{R as l,u as d,j as a}from"./index-CvnsEHGv.js";import{d as p,h,f as u,l as g,F as c,a as n,c as m,s as w,i as f,b as x,Q as y,g as b}from"./createGoogleProvider-MjuBZSs0.js";const j=p("app:signup:emailSignupHandler"),P="/onboarding/role-selection",v=async(r,i,s)=>{try{const e=await h(u.auth,r,i),t=await g.axiosWrapper("POST","https://server-backend-4ag2pvjcbq-em.a.run.app/api/v1/auth/set-default-claims",{uid:e.user.uid});if(t.status===200)return s(P);if(t.status!==200)return s("/login",{state:{error_message:"Oops. We hit a roadblock while trying to automatically log you in. Please login again"}})}catch(e){if(e instanceof c)switch(e.code){case"auth/email-already-in-use":return n("Email is already in use.");case"auth/weak-password":return n("Password is too weak.");case"auth/invalid-email":return n("Invalid email.");case"auth/operation-not-allowed":return n("Operation not allowed.");default:return n("An error occurred. Please try again.")}else j(`Error in emailSignupHandler ${e}`),alert(e)}},S=async r=>{const i=m(),s=u.auth;try{const e=await w(s,i),t=e.user.metadata;return t.creationTime===t.lastSignInTime?f(r,e.user.uid):x(e,r)}catch(e){if(e instanceof c)switch(e.code){case"auth/account-exists-with-different-credential":return n("Account was created with a different provider. Please use the correct login method.");case"auth/operation-not-allowed":return alert("Operation not allowed.");default:return alert("An error occurred. Please try again.")}}},E=()=>{const[r,i]=l.useState(""),[s,e]=l.useState("");l.useState("");const t=d();return a.jsxs(a.Fragment,{children:[a.jsx(y,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",limit:2,transition:b}),a.jsx("h1",{children:"Sign Up"}),a.jsxs("form",{children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",onChange:o=>i(o.target.value)}),a.jsx("label",{children:"Password"}),a.jsx("input",{type:"password",onChange:o=>e(o.target.value)}),a.jsx("label",{children:"Confirm Password"}),a.jsx("input",{type:"password"}),a.jsx("button",{onClick:async o=>{o.preventDefault(),await v(r,s,t)},children:"Sign Up"})]}),a.jsx("button",{onClick:async()=>{await S(t)},children:"Sign up with Google"})]})};export{E as default};
